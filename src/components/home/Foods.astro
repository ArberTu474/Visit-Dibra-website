---
// Components
import { Image } from '@astrojs/image/components'
import SectionContent from '../SectionContent.astro'
import Card from '../Card.astro'
import Button from '../Button.astro'

// Articles
const allArticles = await Astro.glob('../../pages/foods/*.md')

const number_of_cards_shown = 4
---

<div class='relative'>
  <div class='page-container'>
    <SectionContent
      title='Authentic Cuisine'
      section_color='orange'
      icon_src='/icons/foods_icon.svg'
      text_position='center'
    >
      Lorem ipsum dolor sit amet consectetur. Suspendisse sed nisi aenean nisl
      faucibus eget et sit nisl. Mollis ac aliquam neque pretium orci. Risus sed
      quis adipiscing amet mattis et a tincidunt eu. Vulputate sapien aliquam
      lectus facilisis vitae hac ultrices
    </SectionContent>

    <div class='grid grid-cols-1 lg:grid-cols-2 gap-6 mt-12'>
      {
        allArticles.slice(0, number_of_cards_shown).map((article, i) => (
          <a href={article.url}>
            <Card className='hover:-translate-y-2 transition-transform duration-300'>
              <div class='flex flex-col xs:flex-row gap-6 '>
                <Image
                  class='object-cover rounded-lg bg-gray-400 h-fit overflow-hidden'
                  src={
                    article.frontmatter.img_url
                      ? article.frontmatter.img_url
                      : '/'
                  }
                  alt={article.frontmatter.title}
                  width={500}
                  aspectRatio='4:3'
                  format='avif'
                />

                <div>
                  <h2 class='text-xl font-semibold mb-1'>
                    {article.frontmatter.title}
                  </h2>
                  <p class='text-base text-gray-500 max-w-2xl'>
                    {article.frontmatter.description.slice(0, 120) + '...'}
                  </p>
                </div>
              </div>
            </Card>
          </a>
        ))
      }

      <div class='flex justify-center lg:col-span-2'>
        <Button href='/' btnColor='orange' rounded={true}>Learn More</Button>
      </div>
    </div>
  </div>

  <!-- Background Icon -->
  <Image
    class='bg-icons'
    src='/icons/foods_icon_bg.svg'
    alt='icon'
    height={1154 / 1.3}
    width={785 / 1.3}
  />
</div>
